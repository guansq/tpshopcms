<!DOCTYPE html>
<html lang="en">
<include file="public/miniheader"/>
<head>
   <meta charset="UTF-8">
   <title>Title</title>
</head>
<body>
<main id="main01" class="main01">
   <div id="headerImages">
      <div class="content">
         <span class="streamer"><strong>Bezoek ons</strong><br>opeen beurs</span>
      </div>
      <div id="headerPhoto" class="producten"></div>
      <div class="shadow"></div>
      <div class="fixWauto downloadDiv clearfloat">
         <div class="print fl">
            <h3>PRINT</h3>
            <ul class="txt_content print-article">
               <li>
                  <p class="title-p"><span class="src">18-01-25</span></p> <span class="close" style="display: none"></span>
                  <h3 class="tit">测试测试</h3>
                  <p>
                     <img src="/public/upload/article/2018/01-31/6bd4adabaef15208d3d59009b8cf82ad.png" alt="">
                  </p>
                  <p>又是一个阳光灿烂的中午，看了一上午的报纸，茶水也顺带喝了不少，肚子早已经咕咕作响了，今天中午吃点什么了，貌似楼下的新开张的盒饭还不错，于是我来到楼下准备买上一盒。<br>
                     &nbsp;菜色还不错，价格有6元，8元，10元，12元，20元的，像哥这样的精英管理人才，怎么着也的吃最高级的才配合身份，就在我准备购买时，一个响亮的声音响起。</p>
                  <p style="display: none;">"老板，给我一份10元的盒饭"。</p>
                  <p style="display: none;">顺势撇了一眼，一个小伙子，眉开眼笑的靠近盒饭铺，今天是1号，看样子是发工资了。就当他走近时，看到了我，
                     刚才的欢愉的表情瞬时黯淡下去，他知道我认出了他，靠，满头白里带一点黑的头发，永远没睡醒的眼神，以及那凌乱的胡渣子，都出卖了他的身份。
                     我继续狠狠的盯着他，他越发的羞愧了，我犀利的眼神正在和他做着底层通信，我默默的向他传达一个信息，<br>
                     &nbsp;"你，也配吃10元的盒饭?"。</p>
                  <p style="display: none;">他哀怜的眼神似乎在祈求我不要拆穿他的身份，可惜，哥这么有正义感的人，怎么能在这个时候放弃原则!<br>
                     &nbsp;"你不是隔壁公司的程序员么?"<br>
                     &nbsp;就这一瞬间，他整个人似乎崩溃下去，刚才欢愉的表情彻底变为哭丧，周围的小摊贩以及路人甲乙丙丁，都纷纷投来了鄙视的眼光，
                     他瘟鸡一样的双手抓着头发，痛苦的蹲了下去。</p>
                  <p style="display: none;">就在这时，人群中终于有人忍不住了，大声呵骂到，<br>
                     &nbsp;"呸，程序员也敢吃10元的盒饭，真不要脸"<br>
                     &nbsp;一位老大娘好心的提醒到，<br>
                     &nbsp;"小伙子啊，你一个程序员，挣点钱不容易啊，怎么吃10元的盒饭啊"</p>
                  <p style="display: none;">一名打扮妖艳入时的姑娘说到，<br>
                     &nbsp;"人家当小姐的都才吃10元，你也敢要10元的?"<br>
                     &nbsp;我义正言辞的给他说到，<br>
                     &nbsp;"我说一句话顶你写一万行代码，也才吃20元的盒饭，你竟敢吃10元的"<br>
                     &nbsp;老板也发话了，<br>
                     &nbsp;"是程序员啊，太不好意思了，你吃6元的吧，不然人家知道我卖了你10元的，我这生意就做不了啊"</p>
                  <p style="display: none;">他终于发出颤抖的声音说到<br>
                     &nbsp;"对不起，我刚才说错了，给我一份6元的"。<br>
                     &nbsp;这时人群中爆发出激烈的掌声，我知道，这是我又一次坚持原则，换来的荣誉的赞赏!
                     &nbsp;</p>
                  <div class="less_meer ffc" style="opacity: 1; display: none;">
                     <span class="left"> less meer</span>
                     <span class="right">+</span>
                  </div>
               </li>
               <li>
                  <p class="title-p"><span class="src">18-02-02</span></p> <span class="close" style="display: none"></span>
                  <h3 class="tit">我是文章测试测试测试测试忽略</h3>
                  <p>
                     我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略我是文章测试测试测试测试忽略</p>
                  <div class="less_meer ffc" style="opacity: 1; display: none;">
                     <span class="left"> less meer</span>
                     <span class="right">+</span>
                  </div>
               </li>
            </ul>
         </div>
         <div class="download fr Optional_wrap28">
            <H3>DOWNLOAD</H3>
            <ul class="txt_content print-article download-zero">
               <div class="password-bounce clearfloat">
                  <div class="passwordDiv">
                     <span class="fl">请输入密码</span>
                     <label for="ipt" class="passwordLabel fr">
                        <ul>
                           <li></li>
                           <li></li>
                           <li></li>
                           <li></li>
                           <li></li>
                           <li></li>
                        </ul>
                     </label>
                     <input type="password" id="password" name="password" maxlength="6">
                  </div>
               </div>
            </ul>
         </div>
      </div>
   </div>
</main>
<div class="maskDiv" style="display: none"></div>
<script type="text/javascript">
  function cover() {
    $('.maskDiv').show()
  }
  
  function undercover() {
    $('.maskDiv').hide()
  }
  
  $(function () {
    
    $('.txt_content li').each(function (i, item) {
      $(item).hover(() => {
//        console.log(this);
        $(item).find('.less_meer').stop().fadeIn(3000);
      }, () => {
        $(item).find('.less_meer').stop().fadeOut(3000);
      });
      
      var pList = $(item).find('p')
//      console.log(pList);
      for (var i = 3; i < pList.length; i++) {
        $(pList[i]).hide()
      }
      
      $('.less_meer').click(function () {
//        console.log(this);
        $(this).parent('li').addClass('bounce');
        $('.maskDiv').show();
        $('.bounce').addClass('bounce');
        $('.txt_content li').find('.close').show();
        $('.txt_content li').unbind('mouseenter').unbind('mouseleave');
        $('.less_meer').hide()
        for (var i = 0; i < pList.length; i++) {
//          console.log($(pList[i]))
          $(pList).show()
        }
        cover()
      });
      
      var thishover = $(item)
      $('.close').click(function () {
        $('.bounce').removeClass('bounce');
        $('.maskDiv').hide();
        $('.txt_content li').find('.close').hide();
        for (var i = 3; i < pList.length; i++) {
          $(pList[i]).hide()
        }
        undercover();
        $(thishover).hover(() => {
//        console.log(this);
          $(thishover).find('.less_meer').stop().fadeIn(300);
        }, () => {
          $(thishover).find('.less_meer').stop().fadeOut(300);
        });
      });
      
    });
    
    $('.inli').each(function (i, item) {
      $(item).hover(() => {
            $('.hoverturn').css('color', '#F7750B');
            $('.inli p').css('color', '#000');
          }, () => {
            $('.hoverturn').css('color', '#b6b4b4');
            $('.inli p').css('color', '#b6b4b4');
          }
      )
    })
    
    
    showcontent = (obj) => {
      var li = $(obj).parent('.outli')
//      console.log($(li))
      $(li).find('.NieuwsContentList li').click(function (e) {
        e.stopPropagation();
      })
      $(li).find('.NieuwsContentList li').each(function (i, item) {
        $(this).find('.para').find('p:gt(0)').hide();

//        console.log(pArr)
        $(item).hover(() => {
//           console.log(this)
          $(this).find('.see_more').stop().fadeIn(300)
        }, () => {
          $(this).find('.see_more').stop().fadeOut(300)
        })
        
        $('.see_more').click(function () {
          $('.closer').show();
          $(this).parent('.inli').addClass('bounce');
          $('.NieuwsContentList li').unbind('mouseenter').unbind('mouseleave');
          $(this).hide();
          $(this).siblings('.para').find('p').show();
          cover();
        })
        
        var hover = $(item)
        $('.closer').click(function () {
          $('.closer').hide();
          $(this).parent('.inli').removeClass('bounce');
          undercover();
          $(hover).hover(() => {
            console.log(hover)
            $(hover).find('.see_more').stop().fadeIn(300)
          }, () => {
            $(hover).find('.see_more').stop().fadeOut(300)
          })
        })
      })
      
      var i = $(li).find('h3').find('i');
      if (i.hasClass('up')) {
        i.removeClass('up');
        i.addClass('down');
      } else {
        i.removeClass('down');
        i.addClass('up');
      }
      $(li).find('.NieuwsContentList li').toggle(300);
    };
  
    $('.downloading').click(function () {
      id = $(this).attr('id');
      file_url = $(this).attr('file_url')
      $('.password-bounce').show();
      $('.passwordDiv input').on('input', function (e) {
        var number = 6;
        var pw = $("input[name = 'password']").val();
        var list = $('.passwordDiv ul li');
        for (var i = 0; i < number; i++) {
          if (pw[i]) {
            $(list[i]).text('•');
            if(pw.length == 6 && i==5 && pw === password ){
              $('.password-bounce').hide();
              window.location.href = 'http://{$_SERVER[HTTP_HOST]}'+ file_url;
            }else if(pw.length == 6 && i==5 && pw != password){
              alert('密码错误')
            }
          } else {
            $(list[i]).text('');
          };
        };
      });
      //点击密码框清除密码
      $('.passwordDiv ul').click(function () {
        $("input[name = 'password']").val('');
        $('#password').focus();
        $('.passwordDiv ul li').text('')
      });
    })
  
  })

  
  $.ajax({
    async:false,
    type: "GET",
    url: "http://{$_SERVER[HTTP_HOST]}/index.php/home/Download/getPwd",//+tab,
    dataType: "json",
    success: function (data) {
      console.log(data)
      if (data.status == 1){
          var password  =  data.result
      }else {
        alert('请求加载出现问题')
      }
    }
  });

  //密码框输入事件
  $('.close').click(function () {
    $('.pay_psw').hide();
    undercover();
  })

//获取下载列表
  $.ajax({
    type: "GET",
    url: "http://{$_SERVER[HTTP_HOST]}/index.php/home/Download/getDownload",
    dataType: "json",
    success: function (data) {
      if (data.status == 1){
        console.log(data);
        $.each(data.result ,function (i,item) {
          var html = '<li>' + '<span>'+ item.title + '</span>' + '<span class="downloading"></span>' + '</li>';
          $('.downloading').attr({
            'id':item.id,  "file_url" : item.file_url})
          $('.download-zero').append(html);
        })
      }else {
        alert('Ajax Error')
      }
    }
  });
  
 var password = ''
  $.ajax({
    async:false,
    type: "GET",
    url: "http://{$_SERVER[HTTP_HOST]}/index.php/home/Download/getPwd",//+tab,
    dataType: "json",
    success: function (data) {
      if (data.status == 1){
        password = data.result
      }else {
        alert('请求加载出现问题')
      }
    }
  });
 
</script>

</body>
</html>